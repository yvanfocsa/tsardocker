{% extends "base.html" %}

{% block content %}
<div class="container mx-auto px-6 py-12">
  {% if cats %}
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-12 justify-items-center">
      {% for category, mods in cats.items() %}
        {% set m = mods[0] %}
        <div class="max-w-md w-full bg-translucent p-8 rounded-2xl shadow-md hover:shadow-xl transition-shadow duration-200">
          <h3 class="text-2xl font-bold text-[var(--tsar-text)] mb-3">{{ category }}</h3>
          <p class="text-gray-400 text-sm mb-6 leading-relaxed">{{ m.description }}</p>

          <div class="flex items-center justify-between mt-4">
            <a href="{{ url_for('routes.module_live', name=m.name) }}"
               class="inline-block px-6 py-3 bg-[var(--tsar-accent)] border-2 border-[var(--tsar-accent)] rounded-lg font-semibold text-black text-center shadow-md hover:bg-[var(--tsar-accent2)] hover:border-[var(--tsar-accent2)]">
              Lancer
            </a>
            <button hx-post="{{ url_for('routes.toggle_favorite', name=m.name) }}"
                    hx-swap="outerHTML"
                    class="fav-btn {% if m.name in session.get('favorites', []) %}filled{% else %}outline{% endif %} focus:outline-none focus:ring-0"
                    title="Ajouter/retirer des favoris">
              {% if m.name in session.get('favorites', []) %}★{% else %}☆{% endif %}
            </button>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <p class="text-gray-400 text-center">Aucun module trouvé.</p>
  {% endif %}
</div>
{% endblock %}
